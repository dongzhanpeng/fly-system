package ${package.Controller};
import com.github.pagehelper.PageInfo;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.springframework.validation.annotation.Validated;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import ${cfg.result};
import ${cfg.basePackage}.IdsReq;
import ${cfg.basePackage}.IdReq;
import ${cfg.utilPackage}.DozerUtil;
import ${package.Service}.${table.serviceName};
import ${package.Entity}.${entity};
import ${cfg.reqPackage}.${entity}QueryReq;
import ${cfg.reqPackage}.${entity}SaveReq;
import ${cfg.respPackage}.${entity}DetailResp;
import ${cfg.respPackage}.${entity}ListResp;
import lombok.extern.slf4j.Slf4j;
#if(${superControllerClassPackage})
import ${superControllerClassPackage};
#end

/**
 * <p>
 * $!{table.comment} 前端控制器
 * </p>
 *
 * @author ${author}
 * @since 2022-04-10
 */
@Slf4j
@RestController
@RequestMapping("/api/sys#if(${package.ModuleName})/${package.ModuleName}#end/#if(${controllerMappingHyphenStyle})${controllerMappingHyphen}#else${entity}#end")
@Api(value = "${table.comment}-${table.controllerName}",tags = {"${table.comment}"})
#if(${kotlin})
class ${table.controllerName}#if(${superControllerClass}) : ${superControllerClass}()#end

#else
#if(${superControllerClass})
public class ${table.controllerName} extends ${superControllerClass} {
#else
public class ${table.controllerName} {
#end
    @Autowired
    private ${table.serviceName} service;
    @PostMapping("/page")
    @ApiOperation(value = "${table.comment}列表分页查询")
    public Result<PageInfo<${entity}ListResp>> page(@RequestBody @Validated ${entity}QueryReq req) {
        return Result.success(service.page(req));
    }

    @PostMapping("/save")
    @ApiOperation(value = "${table.comment}新增记录")
    public Result<Boolean> save(@RequestBody @Validated ${entity}SaveReq req) {
        return Result.success(service.save(DozerUtil.convert(req,${entity}.class)));
    }

    @PostMapping("/update")
    @ApiOperation(value = "${table.comment}更新记录")
    public Result<Boolean> update(@RequestBody @Validated ${entity}SaveReq req) {
        return Result.success(service.updateById(DozerUtil.convert(req, ${entity}.class)));
    }

    @PostMapping("/detail")
    @ApiOperation(value = "${table.comment}详情信息")
    public Result<${entity}DetailResp> detail(@RequestBody @Validated IdReq req) {
        return Result.success(DozerUtil.convert(service.getById(req.getId()), ${entity}DetailResp.class));
    }

    @PostMapping("/remove")
    @ApiOperation(value = "${table.comment}删除记录")
    public Result<Boolean> remove(@RequestBody @Validated IdsReq req) {
        return Result.success(service.removeBatchByIds(req.getId()));
    }
}

#end